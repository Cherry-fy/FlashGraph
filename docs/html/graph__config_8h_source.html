<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>FlashGraph: flash-graph/graph_config.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">FlashGraph
   
   </div>
   <div id="projectbrief">A new frontier in parallel graph processing</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">flash-graph/graph_config.h</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef __GRAPH_CONFIG_H__</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define __GRAPH_CONFIG_H__</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &quot;log.h&quot;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &quot;config_map.h&quot;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &quot;graph_exception.h&quot;</span>
<a name="l00026"></a>00026 
<a name="l00030"></a><a class="code" href="classgraph__config.html">00030</a> <span class="keyword">class </span><a class="code" href="classgraph__config.html">graph_config</a>
<a name="l00031"></a>00031 {
<a name="l00032"></a>00032     <span class="keywordtype">int</span> num_threads;
<a name="l00033"></a>00033     std::string prof_file;
<a name="l00034"></a>00034     std::string trace_file;
<a name="l00035"></a>00035     <span class="keywordtype">int</span> max_processing_vertices;
<a name="l00036"></a>00036     <span class="keywordtype">bool</span> enable_elevator;
<a name="l00037"></a>00037     <span class="keywordtype">int</span> part_range_size_log;
<a name="l00038"></a>00038     <span class="keywordtype">bool</span> _preload;
<a name="l00039"></a>00039     <span class="keywordtype">int</span> index_file_weight;
<a name="l00040"></a>00040     <span class="keywordtype">bool</span> _in_mem_index;
<a name="l00041"></a>00041     <span class="keywordtype">bool</span> _in_mem_graph;
<a name="l00042"></a>00042     <span class="keywordtype">int</span> num_vparts;
<a name="l00043"></a>00043     <span class="keywordtype">int</span> min_vpart_degree;
<a name="l00044"></a>00044     <span class="keywordtype">bool</span> serial_run;
<a name="l00045"></a>00045 <span class="keyword">public</span>:
<a name="l00050"></a><a class="code" href="classgraph__config.html#a35db12cef16fe90220b8c87dc4266ee5">00050</a>     <a class="code" href="classgraph__config.html#a35db12cef16fe90220b8c87dc4266ee5" title="The default constructor that set all configurations to their default values.">graph_config</a>() {
<a name="l00051"></a>00051         num_threads = 4;
<a name="l00052"></a>00052         max_processing_vertices = 2000;
<a name="l00053"></a>00053         enable_elevator = <span class="keyword">false</span>;
<a name="l00054"></a>00054         part_range_size_log = 10;
<a name="l00055"></a>00055         _preload = <span class="keyword">false</span>;
<a name="l00056"></a>00056         index_file_weight = 10;
<a name="l00057"></a>00057         _in_mem_index = <span class="keyword">false</span>;
<a name="l00058"></a>00058         _in_mem_graph = <span class="keyword">false</span>;
<a name="l00059"></a>00059         num_vparts = 1;
<a name="l00060"></a>00060         min_vpart_degree = std::numeric_limits&lt;int&gt;::max();
<a name="l00061"></a>00061         serial_run = <span class="keyword">false</span>;
<a name="l00062"></a>00062     }
<a name="l00063"></a>00063 
<a name="l00067"></a>00067     <span class="keywordtype">void</span> <a class="code" href="classgraph__config.html#a8487e55be96e46b3448373e2e4790817" title="Print the explanations of all configurations.">print_help</a>();
<a name="l00071"></a>00071     <span class="keywordtype">void</span> <a class="code" href="classgraph__config.html#ac4905cd7a01573139b39ea67de4642b4" title="Print the current values of all configurations.">print</a>();
<a name="l00072"></a>00072 
<a name="l00076"></a>00076     <span class="keywordtype">void</span> <a class="code" href="classgraph__config.html#a951ab290a1bf0e19bd69f1e90ad818f2" title="Set the configurations to the user-defined values.">init</a>(config_map::ptr map);
<a name="l00077"></a>00077 
<a name="l00082"></a><a class="code" href="classgraph__config.html#afd6a5a7cefc6068b3be5e6e12ab0f79a">00082</a>     <span class="keyword">const</span> std::string &amp;<a class="code" href="classgraph__config.html#afd6a5a7cefc6068b3be5e6e12ab0f79a" title="Get the output file containing CPU profiling.">get_prof_file</a>()<span class="keyword"> const </span>{
<a name="l00083"></a>00083         <span class="keywordflow">return</span> prof_file;
<a name="l00084"></a>00084     }
<a name="l00085"></a>00085 
<a name="l00090"></a><a class="code" href="classgraph__config.html#a7dd5b1a7ab1ffcb8296ab6d14560ce2e">00090</a>     <span class="keywordtype">int</span> <a class="code" href="classgraph__config.html#a7dd5b1a7ab1ffcb8296ab6d14560ce2e" title="Get the number of worker threads used by the graph engine.">get_num_threads</a>()<span class="keyword"> const </span>{
<a name="l00091"></a>00091         <span class="keywordflow">return</span> num_threads;
<a name="l00092"></a>00092     }
<a name="l00093"></a>00093 
<a name="l00099"></a><a class="code" href="classgraph__config.html#a3864463d73e02dd1d27495ff00d4865d">00099</a>     <span class="keywordtype">bool</span> <a class="code" href="classgraph__config.html#a3864463d73e02dd1d27495ff00d4865d" title="Determine whehter to use the elevator algorithm in accessing the adjacency lists of vertices from SSD...">get_elevator_enabled</a>()<span class="keyword"> const </span>{
<a name="l00100"></a>00100         <span class="keywordflow">return</span> enable_elevator;
<a name="l00101"></a>00101     }
<a name="l00102"></a>00102 
<a name="l00108"></a><a class="code" href="classgraph__config.html#a07e427e0b6bfada7043c6ab2d95339aa">00108</a>     <span class="keyword">const</span> std::string &amp;<a class="code" href="classgraph__config.html#a07e427e0b6bfada7043c6ab2d95339aa" title="Get the I/O trace file that records all I/O requests generated by the graph engine.">get_trace_file</a>()<span class="keyword"> const </span>{
<a name="l00109"></a>00109         <span class="keywordflow">return</span> trace_file;
<a name="l00110"></a>00110     }
<a name="l00111"></a>00111 
<a name="l00117"></a><a class="code" href="classgraph__config.html#a96622c52ce49acb3e35fe9afcd61fc55">00117</a>     <span class="keywordtype">int</span> <a class="code" href="classgraph__config.html#a96622c52ce49acb3e35fe9afcd61fc55" title="Get the maximal number of vertices being processed by a worker thread.">get_max_processing_vertices</a>()<span class="keyword"> const </span>{
<a name="l00118"></a>00118         <span class="keywordflow">return</span> max_processing_vertices;
<a name="l00119"></a>00119     }
<a name="l00120"></a>00120 
<a name="l00125"></a><a class="code" href="classgraph__config.html#ab3d6cef4849a51552c99198f7a87cf7e">00125</a>     <span class="keywordtype">int</span> <a class="code" href="classgraph__config.html#ab3d6cef4849a51552c99198f7a87cf7e" title="Get the size of a partition range at log scale.">get_part_range_size_log</a>()<span class="keyword"> const </span>{
<a name="l00126"></a>00126         <span class="keywordflow">return</span> part_range_size_log;
<a name="l00127"></a>00127     }
<a name="l00128"></a>00128 
<a name="l00133"></a><a class="code" href="classgraph__config.html#ad8299c6043cd996d962c3eded6a6b168">00133</a>     <span class="keywordtype">bool</span> <a class="code" href="classgraph__config.html#ad8299c6043cd996d962c3eded6a6b168" title="Determine whether to preload the graph data to the page cache.">preload</a>()<span class="keyword"> const </span>{
<a name="l00134"></a>00134         <span class="keywordflow">return</span> _preload;
<a name="l00135"></a>00135     }
<a name="l00136"></a>00136 
<a name="l00144"></a><a class="code" href="classgraph__config.html#a574ccd1e7a9e14bcf9ede76da813bcf4">00144</a>     <span class="keywordtype">int</span> <a class="code" href="classgraph__config.html#a574ccd1e7a9e14bcf9ede76da813bcf4" title="Get the weight for graph index file. A SAFS file has weight that is used in the page cache...">get_index_file_weight</a>()<span class="keyword"> const </span>{
<a name="l00145"></a>00145         <span class="keywordflow">return</span> index_file_weight;
<a name="l00146"></a>00146     }
<a name="l00147"></a>00147 
<a name="l00152"></a><a class="code" href="classgraph__config.html#ab290c42e91f78fdc69be571e1e040aed">00152</a>     <span class="keywordtype">bool</span> <a class="code" href="classgraph__config.html#ab290c42e91f78fdc69be571e1e040aed" title="Determine whether to use in-mem vertex index.">use_in_mem_index</a>()<span class="keyword"> const </span>{
<a name="l00153"></a>00153         <span class="keywordflow">return</span> _in_mem_index;
<a name="l00154"></a>00154     }
<a name="l00155"></a>00155 
<a name="l00161"></a><a class="code" href="classgraph__config.html#a974e18c18c1b3b463bcfe1f6dcf961e1">00161</a>     <span class="keywordtype">bool</span> <a class="code" href="classgraph__config.html#a974e18c18c1b3b463bcfe1f6dcf961e1" title="Determine whether to use in-mem graph data.">use_in_mem_graph</a>()<span class="keyword"> const </span>{
<a name="l00162"></a>00162         <span class="keywordflow">return</span> _in_mem_graph;
<a name="l00163"></a>00163     }
<a name="l00164"></a>00164 
<a name="l00169"></a><a class="code" href="classgraph__config.html#aff56e17d4e8305e7bde3faceb2da6890">00169</a>     <span class="keywordtype">bool</span> <a class="code" href="classgraph__config.html#aff56e17d4e8305e7bde3faceb2da6890" title="Determine whether to run the user code on a vertex in serial.">use_serial_run</a>()<span class="keyword"> const </span>{
<a name="l00170"></a>00170         <span class="keywordflow">return</span> serial_run;
<a name="l00171"></a>00171     }
<a name="l00172"></a>00172 
<a name="l00177"></a><a class="code" href="classgraph__config.html#ac5bb3b71fc66e30c4b5f419647fdaddc">00177</a>     <span class="keywordtype">int</span> <a class="code" href="classgraph__config.html#ac5bb3b71fc66e30c4b5f419647fdaddc" title="Get the number of vertical partitions.">get_num_vparts</a>()<span class="keyword"> const </span>{
<a name="l00178"></a>00178         <span class="keywordflow">return</span> num_vparts;
<a name="l00179"></a>00179     }
<a name="l00180"></a>00180 
<a name="l00185"></a><a class="code" href="classgraph__config.html#a71c4bafe8bde9faf31faa334c6d305d1">00185</a>     <span class="keywordtype">int</span> <a class="code" href="classgraph__config.html#a71c4bafe8bde9faf31faa334c6d305d1" title="Get the min degree of a vertex to perform vertical partitioning.">get_min_vpart_degree</a>()<span class="keyword"> const </span>{
<a name="l00186"></a>00186         <span class="keywordflow">return</span> min_vpart_degree;
<a name="l00187"></a>00187     }
<a name="l00188"></a>00188 };
<a name="l00189"></a>00189 
<a name="l00190"></a><a class="code" href="classgraph__config.html#a8487e55be96e46b3448373e2e4790817">00190</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classgraph__config.html#a8487e55be96e46b3448373e2e4790817" title="Print the explanations of all configurations.">graph_config::print_help</a>()
<a name="l00191"></a>00191 {
<a name="l00192"></a>00192     printf(<span class="stringliteral">&quot;Configuration parameters in graph algorithm.\n&quot;</span>);
<a name="l00193"></a>00193     printf(<span class="stringliteral">&quot;\tthreads: the number of threads processing the graph\n&quot;</span>);
<a name="l00194"></a>00194     printf(<span class="stringliteral">&quot;\tprof_file: the output file containing CPU profiling\n&quot;</span>);
<a name="l00195"></a>00195     printf(<span class="stringliteral">&quot;\ttrace_file: log IO requests\n&quot;</span>);
<a name="l00196"></a>00196     printf(<span class="stringliteral">&quot;\tmax_processing_vertices: the max number of vertices being processed\n&quot;</span>);
<a name="l00197"></a>00197     printf(<span class="stringliteral">&quot;\tenable_elevator: enable the elevator algorithm for scheduling vertices\n&quot;</span>);
<a name="l00198"></a>00198     printf(<span class="stringliteral">&quot;\tpart_range_size_log: the log2 of the range size in range partitioning\n&quot;</span>);
<a name="l00199"></a>00199     printf(<span class="stringliteral">&quot;\tpreload: preload the graph data to the page cache\n&quot;</span>);
<a name="l00200"></a>00200     printf(<span class="stringliteral">&quot;\tindex_file_weight: the weight for the graph index file\n&quot;</span>);
<a name="l00201"></a>00201     printf(<span class="stringliteral">&quot;\tin_mem_index: indicate whether to use in-mem vertex index\n&quot;</span>);
<a name="l00202"></a>00202     printf(<span class="stringliteral">&quot;\tin_mem_graph: indicate whether to load the entire graph to memory in advance\n&quot;</span>);
<a name="l00203"></a>00203     printf(<span class="stringliteral">&quot;\tnum_vparts: the number of vertical partitions\n&quot;</span>);
<a name="l00204"></a>00204     printf(<span class="stringliteral">&quot;\tmin_vpart_degree: the min degree of a vertex to perform vertical partitioning\n&quot;</span>);
<a name="l00205"></a>00205     printf(<span class="stringliteral">&quot;\tserial_run: run the user code on a vertex in serial\n&quot;</span>);
<a name="l00206"></a>00206 }
<a name="l00207"></a>00207 
<a name="l00208"></a><a class="code" href="classgraph__config.html#ac4905cd7a01573139b39ea67de4642b4">00208</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classgraph__config.html#ac4905cd7a01573139b39ea67de4642b4" title="Print the current values of all configurations.">graph_config::print</a>()
<a name="l00209"></a>00209 {
<a name="l00210"></a>00210     BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;Configuration parameters in graph algorithm.&quot;</span>;
<a name="l00211"></a>00211     BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;\tthreads: &quot;</span> &lt;&lt; num_threads;
<a name="l00212"></a>00212     BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;\tprof_file: &quot;</span> &lt;&lt; prof_file;
<a name="l00213"></a>00213     BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;\ttrace_file: &quot;</span> &lt;&lt; trace_file;
<a name="l00214"></a>00214     BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;\tmax_processing_vertices: &quot;</span> &lt;&lt; max_processing_vertices;
<a name="l00215"></a>00215     BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;\tenable_elevator: &quot;</span> &lt;&lt; enable_elevator;
<a name="l00216"></a>00216     BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;\tpart_range_size_log: &quot;</span> &lt;&lt; part_range_size_log;
<a name="l00217"></a>00217     BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;\tpreload: &quot;</span> &lt;&lt; _preload;
<a name="l00218"></a>00218     BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;\tindex_file_weight: &quot;</span> &lt;&lt; index_file_weight;
<a name="l00219"></a>00219     BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;\tin_mem_index: &quot;</span> &lt;&lt; _in_mem_index;
<a name="l00220"></a>00220     BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;\tin_mem_graph: &quot;</span> &lt;&lt; _in_mem_graph;
<a name="l00221"></a>00221     BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;\tnum_vparts: &quot;</span> &lt;&lt; num_vparts;
<a name="l00222"></a>00222     BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;\tmin_vpart_degree: &quot;</span> &lt;&lt; min_vpart_degree;
<a name="l00223"></a>00223     BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;\tserial_run: &quot;</span> &lt;&lt; serial_run;
<a name="l00224"></a>00224 }
<a name="l00225"></a>00225 
<a name="l00226"></a><a class="code" href="classgraph__config.html#a951ab290a1bf0e19bd69f1e90ad818f2">00226</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classgraph__config.html#a951ab290a1bf0e19bd69f1e90ad818f2" title="Set the configurations to the user-defined values.">graph_config::init</a>(config_map::ptr map)
<a name="l00227"></a>00227 {
<a name="l00228"></a>00228     map-&gt;read_option_int(<span class="stringliteral">&quot;threads&quot;</span>, num_threads);
<a name="l00229"></a>00229     <span class="keywordflow">if</span> (!power2(num_threads))
<a name="l00230"></a>00230         <span class="keywordflow">throw</span> conf_exception(<span class="stringliteral">&quot;The number of worker threads has to be 2^n&quot;</span>);
<a name="l00231"></a>00231     map-&gt;read_option(<span class="stringliteral">&quot;prof_file&quot;</span>, prof_file);
<a name="l00232"></a>00232     map-&gt;read_option(<span class="stringliteral">&quot;trace_file&quot;</span>, trace_file);
<a name="l00233"></a>00233     map-&gt;read_option_int(<span class="stringliteral">&quot;max_processing_vertices&quot;</span>, max_processing_vertices);
<a name="l00234"></a>00234     map-&gt;read_option_bool(<span class="stringliteral">&quot;enable_elevator&quot;</span>, enable_elevator);
<a name="l00235"></a>00235     map-&gt;read_option_int(<span class="stringliteral">&quot;part_range_size_log&quot;</span>, part_range_size_log);
<a name="l00236"></a>00236     map-&gt;read_option_bool(<span class="stringliteral">&quot;preload&quot;</span>, _preload);
<a name="l00237"></a>00237     map-&gt;read_option_int(<span class="stringliteral">&quot;index_file_weight&quot;</span>, index_file_weight);
<a name="l00238"></a>00238     map-&gt;read_option_bool(<span class="stringliteral">&quot;in_mem_index&quot;</span>, _in_mem_index);
<a name="l00239"></a>00239     map-&gt;read_option_bool(<span class="stringliteral">&quot;in_mem_graph&quot;</span>, _in_mem_graph);
<a name="l00240"></a>00240     map-&gt;read_option_int(<span class="stringliteral">&quot;num_vparts&quot;</span>, num_vparts);
<a name="l00241"></a>00241     map-&gt;read_option_int(<span class="stringliteral">&quot;min_vpart_degree&quot;</span>, min_vpart_degree);
<a name="l00242"></a>00242     map-&gt;read_option_bool(<span class="stringliteral">&quot;serial_run&quot;</span>, serial_run);
<a name="l00243"></a>00243 }
<a name="l00244"></a>00244 
<a name="l00245"></a>00245 <span class="keyword">extern</span> <a class="code" href="classgraph__config.html">graph_config</a> graph_conf;
<a name="l00246"></a>00246 
<a name="l00247"></a>00247 <span class="preprocessor">#endif</span>
</pre></div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Tue Apr 28 2015 09:47:16 for FlashGraph by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
